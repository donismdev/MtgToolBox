const cards={penalty:[["세금 징수","자금 카드 1장을 버린다."],["부상","라운드에서 제외된다."],["체포","능력을 사용할 수 없다."],["수배","점수 획득이 불가능하다."],["잠복","카드를 1장만 소지할 수 있다."]],advantage:[["뇌물","패널티 카드 1장을 제거한다."],["보석금","라운드에 다시 참가한다."],["위조 신분","수배 효과를 무시한다."],["매수","다른 사람의 자금 1장을 빼앗는다."],["첩보","자금 카드 1장을 추가로 받는다."]]};let state={penalty:[],advantage:[],score:0,safe:0,alarm:0};let modalInstance=null;function populateSelects(){let e=document.getElementById("penaltySelect"),t=document.getElementById("advantageSelect");e.innerHTML=cards.penalty.map((e,t)=>`<option value="${t}">${e[0]}</option>`).join(""),t.innerHTML=cards.advantage.map((e,t)=>`<option value="${t}">${e[0]}</option>`).join("")}function toggleScoreMode(){let e=document.getElementById("scoreMode").value;"counter"==e?(document.getElementById("counterMode").style.display="block",document.getElementById("pointsMode").style.display="none"):(document.getElementById("counterMode").style.display="none",document.getElementById("pointsMode").style.display="block")}function renderCards(){let e=document.getElementById("penaltyCards"),t=document.getElementById("advantageCards");e.innerHTML=state.penalty.map((e,t)=>`<div class="card-box" onclick="showDescription('penalty', ${e})">${cards.penalty[e][0]}<span class="remove" onclick="event.stopPropagation(); removeCard('penalty', ${t})">×</span></div>`).join(""),t.innerHTML=state.advantage.map((e,t)=>`<div class="card-box" onclick="showDescription('advantage', ${e})">${cards.advantage[e][0]}<span class="remove" onclick="event.stopPropagation(); removeCard('advantage', ${t})">×</span></div>`).join("")}function addCard(e,t){let n=document.getElementById(e+"Select"),a=t?Math.floor(Math.random()*cards[e].length):n.value;state[e].push(a),renderCards()}function removeCard(e,t){state[e].splice(t,1),renderCards()}function showAllDescriptions(){let e="<h4>패널티</h4>"+cards.penalty.map(e=>`<b>${e[0]}</b>: ${e[1]}`).join("<br>")+"<hr><h4>어드밴티지</h4>"+cards.advantage.map(e=>`<b>${e[0]}</b>: ${e[1]}`).join("<br>");document.getElementById("descContent").innerHTML=e,modalInstance||(modalInstance=new bootstrap.Modal(document.getElementById("descModal"))),modalInstance.show()}
function closeModalSafely(){modalInstance&&modalInstance.hide()}function showDescription(e,t){document.getElementById("descContent").textContent=cards[e][t][0]+": "+cards[e][t][1],modalInstance||(modalInstance=new bootstrap.Modal(document.getElementById("descModal"))),modalInstance.show()}function resetAll(){state.penalty=[],state.advantage=[],state.score=0,state.safe=0,state.alarm=0,document.getElementById("score").textContent=0,document.getElementById("safeCount").textContent=0,document.getElementById("alarmCount").textContent=0,renderCards()}function changeScore(e){state.score+=e,document.getElementById("score").textContent=state.score}function addCount(e){"safe"===e&&state.safe<3&&state.safe++,"alarm"===e&&state.alarm<3&&state.alarm++,document.getElementById("safeCount").textContent=state.safe,document.getElementById("alarmCount").textContent=state.alarm}populateSelects(),renderCards()
document.addEventListener('DOMContentLoaded', (event) => {
    if (window.bootstrap) {
        modalInstance = new bootstrap.Modal(document.getElementById('descModal'));
    }
});
