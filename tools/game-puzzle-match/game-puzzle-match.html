<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>9x9 Block Puzzle</title>
    <script>
        // Apply theme on initial load BEFORE tailwind script runs
        try {
            const savedMode = localStorage.getItem('darkMode');
            if (savedMode && JSON.parse(savedMode)) {
                document.documentElement.classList.add('dark');
            }
        } catch (e) { /* ignore */ }
    </script>
    <script>
      window.tailwind = window.tailwind || {};
      window.tailwind.config = {
        darkMode: 'class',
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
  <script>
        // Theme listener for dynamic changes from parent window
        window.addEventListener('message', (event) => {
            if (event.data.theme) {
                if (event.data.theme === 'dark') {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
        });
  </script>
  <style>
    :root {
        --u: 24px;
    }
    .board::before{content:""; position:absolute; inset:6px; pointer-events:none; border-radius:8px; background: linear-gradient(rgba(255,255,255,0.08), rgba(255,255,255,0.08)) 0 33.33%/100% 2px no-repeat, linear-gradient(rgba(255,255,255,0.08), rgba(255,255,255,0.08)) 0 66.66%/100% 2px no-repeat, linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.08)) 33.33% 0/2px 100% no-repeat, linear-gradient(90deg, rgba(255,255,255,0.08), rgba(255,255,255,0.08)) 66.66% 0/2px 100% no-repeat}
    .drag-ghost{ position:fixed; z-index:50; pointer-events:none; opacity:.95; transform:translate(-50%,-50%) scale(1.06)}
    @keyframes pop{ from{ transform:translateX(-50%) scale(.9); opacity:0 } to{ transform:translateX(-50%) scale(1); opacity:1 } }
    .toast.show{ display:block; animation:pop .3s ease }
  </style>
</head>
<body class="bg-gradient-to-b from-gray-900 via-gray-900 to-black text-gray-200 flex items-center justify-center min-h-screen p-2 touch-manipulation">
  <div class="app w-[720px] max-w-[96vw] bg-gray-800 rounded-2xl shadow-2xl p-3 grid gap-3 grid-rows-[auto_1fr_auto]">
    <div class="header flex items-center justify-end gap-2">
      <div class="badge" title="Ï†êÏàò">‚≠ê Ï†êÏàò <span class="val" id="score">0</span></div>
      <div class="badge" title="ÏΩ§Î≥¥">üî• ÏΩ§Î≥¥ <span class="val" id="combo">x1</span></div>
      <button class="reset" id="btnReset" title="ÏÉà Í≤åÏûÑ">‚Üª</button>
    </div>

    <div class="board-wrap grid place-items-center"><div class="board w-[340px] h-[340px] bg-gray-700 rounded-xl p-1.5 relative grid grid-cols-9 grid-rows-9 gap-1 border-2 border-gray-900" id="board" aria-label="9x9 Î≥¥Îìú"></div></div>
    <div class="tray flex gap-2 justify-center p-1.5 flex-wrap min-h-[90px]" id="tray" aria-label="ÌòÑÏû¨ ÌîºÏä§ 3Í∞ú"></div>
  </div>
  <div class="toast fixed left-1/2 bottom-4 -translate-x-1/2 bg-gray-900 border border-gray-700 p-2 px-3 rounded-lg font-bold hidden" id="toast">+0</div>
    <style>
        .badge { @apply bg-gray-900 border border-gray-700 rounded-full px-3 py-1.5 font-bold flex gap-2 items-center; }
        .badge .val { @apply min-w-[42px] text-right; }
        .reset { @apply bg-amber-500 text-gray-900 w-8 h-8 rounded-lg font-extrabold cursor-pointer grid place-items-center; }
    </style>
  <script src="js/main.js"></script>
</body>
</html>
