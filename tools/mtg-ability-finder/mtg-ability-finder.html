<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="color-scheme" content="light">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: dark)"><title>MTG Ability Finder</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"><style>body,html{height:100%;margin:0;padding:0;display:flex;flex-direction:column;background-color:#f4f4f4;font-family:system-ui,sans-serif}#searchSection{max-width:800px;margin:0 auto;position:relative;padding:1rem;flex-shrink:0;flex-grow:0}#abilityInput{font-size:1.5rem;padding:1rem;height:4rem}#suggestionBox{background:#fff;border:1px solid #ccc;border-radius:.5rem;margin-top:4px;max-height:200px;overflow-y:auto;padding-left:0;position:absolute;width:100%;z-index:1000;list-style:none;box-shadow:0 4px 6px rgba(0,0,0,.1);display:none;top:calc(100% + 5px);left:0;right:0}#customSuggestions{background-color:#fff;border:1px solid #ccc;border-radius:.5rem;box-shadow:0 4px 12px rgba(0,0,0,.15);padding:.5rem;z-index:9999;position:absolute;width:100%;list-style:none;margin-top:5px}.suggestion-item{background-color:#e0e0e0;border-radius:1rem;padding:.6rem 1rem;margin:.25rem 0;cursor:pointer;font-weight:500;white-space:nowrap;text-align:center;box-shadow:0 2px 4px rgba(0,0,0,.1);border:1px solid #ccc;transition:background-color .2s ease}.suggestion-item.active,.suggestion-item:hover{background-color:#007bff;color:#fff}#scrollableContent{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0 1rem 1rem 1rem}#abilityList{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center;padding:1rem}.ability-badge{all:unset;display:inline-block;padding:.6rem 1rem;background-color:#e0e0e0;border-radius:1rem;cursor:pointer;font-weight:600;white-space:nowrap;text-align:center;box-shadow:0 2px 4px rgba(0,0,0,.1);border:1px solid #ccc;min-width:120px;text-transform:capitalize;flex:0 0 auto;box-sizing:border-box}.ability-badge:hover{background-color:silver;transform:scale(1.03)}#divider{margin:3rem 0 1rem 0;border-bottom:1px solid #ccc}#abilityDetails{display:none;margin-top:2rem;text-align:center;padding-bottom:20px}#resetBtn{margin-top:1.5rem}
:root {
    color-scheme: light; /* 이 문서의 UI 컨트롤들을 라이트로 렌더 */
}

/* 강제 반전 회피용: 배경/텍스트를 명시하고, 폰트 자동확대 방지 */
html, body {
    background-color: #ffffff !important;
    color: #000000 !important;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
}

/* 다크 선호 환경에서도 라이트로 고정 */
 @media (prefers-color-scheme: dark) {
    :root { color-scheme: light; }
    html, body {
        background-color: #ffffff !important;
        color: #000000 !important;
    }
}

/* 이미지/아이콘 반전 방지 (일부 브라우저의 자동 반전 대응) */
img, video, canvas, svg, iframe {
    filter: none !important;
    mix-blend-mode: normal !important;
    background-color: transparent;
}

/* 버튼/카드 같은 컴포넌트들도 색을 명시적으로(예: 부트스트랩 위에 오버라이드) */
.btn, .card, .modal, .dropdown-menu, .list-group, .form-control {
    background-color: #ffffff !important;
    color: #000000 !important;
}

/* 아이프레임으로 띄우는 툴도 자체적으로 라이트를 선언해야 함 */
#modal-tool-iframe {
    color-scheme: light;
    background: #ffffff;
}

/* 강제 색상 조정 기능 끄기(일부 엔진에서만 동작) */
* { forced-color-adjust: none; }

/* 링크, 아이콘 같이 반전 오탐이 잦은 요소 색을 명시 */
a, [class*="bi-"] { color: #0d6efd !important; }
</style></head><body><div id="searchSection"><input type="text" id="abilityInput" class="form-control mb-1" placeholder="Enter MTG ability keyword" oninput="filterAbilities()" autocomplete="off"></div><div id="scrollableContent"><div id="divider"></div><div id="abilityList"></div><div id="abilityDetails"><h2 id="selectedAbility"></h2><p id="abilityText" class="mt-3"></p><button class="btn btn-secondary" id="resetBtn" onclick="resetView()">🔁 Back to List</button></div></div><script>let abilityList=document.getElementById("abilityList"),abilityInput=document.getElementById("abilityInput"),abilityDetails=document.getElementById("abilityDetails"),selectedAbility=document.getElementById("selectedAbility"),abilityText=document.getElementById("abilityText"),scrollableContent=document.getElementById("scrollableContent"),suggestionBox=document.createElement("ul"),abilities=(suggestionBox.id="customSuggestions",suggestionBox.style.position="absolute",suggestionBox.style.display="none",abilityInput.parentNode.style.position="relative",abilityInput.parentNode.appendChild(suggestionBox),{});function renderAbilityList(){abilityList.innerHTML="",Object.keys(abilities).forEach(e=>{var t=document.createElement("div");t.className="ability-badge",t.innerText=e,t.onclick=()=>showAbility(e),abilityList.appendChild(t)})}function formatText(e){return e.replace(/\{\{([^}]+)\}\}/g,(e,t)=>{var i=t.toLowerCase(),i=abilities[i]||mtgData.abilities?.[i];return i&&i.text?`<span title="${i.text}" style="text-decoration: underline dotted; cursor: help;">${t}</span>`:t})}function showAbility(t){let i=abilities[t];if(void 0===i)console.warn(`No info found for "${t}"`);else{"string"==typeof i&&(i={text:i}),selectedAbility.innerText=t;let e="";mtgData.evergreen?.[t]?e="<span class='badge bg-success ms-2'>Evergreen</span>":mtgData.arena?.[t]?e="<span class='badge bg-warning text-dark ms-2'>Arena-only</span>":"abilityWord"===i.type?e="<span class='badge bg-info ms-2'>Ability Word</span>":"keywordAction"===i.type?e="<span class='badge bg-primary ms-2'>Keyword Action</span>":"keywordAbility"===i.type?e="<span class='badge bg-secondary ms-2'>Keyword Ability</span>":mtgData.special?.[t]?e="<span class='badge bg-dark text-white ms-2'>Special</span>":mtgData.special_counters?.[t]?e="<span class='badge bg-danger ms-2'>Special Counter</span>":mtgData.special_tokens?.[t]&&(e="<span class='badge bg-info ms-2'>Special Token</span>"),abilityText.innerHTML=formatText(`<p>${i.text}</p>`+e+(i.image?`<br><img src="${i.image}" style="max-width: 200px; margin-top: 1rem;" />`:"")),abilityList.style.display="none",abilityDetails.style.display="block",suggestionBox.style.display="none",scrollableContent.scrollTop=0}}function resetView(){abilityInput.value="",abilityDetails.style.display="none",abilityList.style.display="flex",suggestionBox.style.display="none",scrollableContent.scrollTop=0}function adjustContentHeight(){var e;window.visualViewport?(e=document.getElementById("searchSection").offsetHeight,e=window.visualViewport.height-e,scrollableContent.style.height=Math.max(0,e)+"px",document.activeElement===abilityInput&&setTimeout(()=>{abilityInput.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)):console.warn("Visual Viewport API not supported. Dynamic height adjustment may not work.")}function filterAbilities(){let t=abilityInput.value.toLowerCase();var e,i;(suggestionBox.innerHTML="")===t?suggestionBox.style.display="none":(i=(e=Object.keys(abilities).filter(e=>e.toLowerCase().startsWith(t))).find(e=>e.toLowerCase()===t))&&1===e.length?(showAbility(i),suggestionBox.style.display="none"):(e.forEach(e=>{let t=document.createElement("li");t.className="suggestion-item",t.innerText=e,t.onmouseover=()=>t.classList.add("selected"),t.onmouseout=()=>t.classList.remove("selected"),t.onclick=()=>{showAbility(abilityInput.value=e),suggestionBox.style.display="none"},suggestionBox.appendChild(t)}),positionSuggestionBox(),suggestionBox.style.display="block")}function positionSuggestionBox(){var e=abilityInput.getBoundingClientRect(),t=abilityInput.parentElement.getBoundingClientRect(),e=e.bottom-t.top;suggestionBox.style.top=e+"px"}window.mtgData={},fetch("./assets/ability_data.json").then(e=>e.json()).then(e=>{window.mtgData=e,abilities={...e.abilities,...e.evergreen,...e.arena,...e.special,...e.special_counters,...e.special_tokens},renderAbilityList(),adjustContentHeight()}),window.visualViewport?(window.visualViewport.addEventListener("resize",adjustContentHeight),window.visualViewport.addEventListener("scroll",adjustContentHeight)):window.addEventListener("resize",adjustContentHeight),document.addEventListener("DOMContentLoaded",adjustContentHeight),abilityInput.addEventListener("keydown",function(e){var t=suggestionBox.querySelectorAll("li");let i=Array.from(t).findIndex(e=>e.classList.contains("selected"));if("ArrowDown"===e.key)0<t.length&&(e.preventDefault(),0<=i&&t[i].classList.remove("selected"),t[i=(i+1)%t.length].classList.add("selected"),t[i].scrollIntoView({behavior:"smooth",block:"nearest"}));else if("ArrowUp"===e.key)0<t.length&&(e.preventDefault(),0<=i&&t[i].classList.remove("selected"),t[i=(i-1+t.length)%t.length].classList.add("selected"),t[i].scrollIntoView({behavior:"smooth",block:"nearest"}));else if("Enter"===e.key)if(0<=i)e.preventDefault(),t[i].click();else{let t=abilityInput.value.toLowerCase();e=Object.keys(abilities).filter(e=>e.toLowerCase()===t);1===e.length&&(showAbility(e[0]),suggestionBox.style.display="none")}})</script></body></html>