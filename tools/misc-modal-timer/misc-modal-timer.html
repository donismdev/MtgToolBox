<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>타이머</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
	<style>
		body {
			background-color: #f5f5f5;
			font-family: 'Pretendard', sans-serif;
			padding: 2rem;
		}
		#timer-display {
			font-size: 4rem;
			font-weight: bold;
			text-align: center;
			margin-bottom: 1.5rem;
			color: #333;
		}
		.btn-group {
			justify-content: center;
			flex-wrap: wrap;
			gap: 0.5rem;
			margin-bottom: 1rem;
		}
		#control-buttons .btn {
			min-width: 100px;
		}
	</style>
</head>
<body>
	<div class="container text-center">
		<h2 class="mb-4">⏱️ 타이머</h2>
		<div id="timer-display">00:00</div>

		<!-- 즉시 시작 버튼 -->
		<div class="btn-group mb-3" role="group">
			<button class="btn btn-success" onclick="startFixed(10)">10분 시작</button>
			<button class="btn btn-success" onclick="startFixed(30)">30분 시작</button>
			<button class="btn btn-success" onclick="startFixed(60)">60분 시작</button>
		</div>

		<!-- 설정 입력 및 적용 -->
		<div class="row justify-content-center align-items-end mb-3 g-2">
			<div class="col-auto">
				<label for="minutesInput" class="form-label">분</label>
				<input type="number" class="form-control" id="minutesInput" min="0" max="999" value="0" />
			</div>
			<div class="col-auto">
				<label for="secondsInput" class="form-label">초</label>
				<input type="number" class="form-control" id="secondsInput" min="0" max="59" value="30" />
			</div>
			<div class="col-auto">
				<button class="btn btn-outline-primary mt-2" onclick="applyTime()">적용</button>
			</div>
		</div>

		<!-- 시간 추가 버튼 -->
		<div class="btn-group mb-3" role="group">
			<button class="btn btn-outline-secondary" onclick="addMinutes(10)">+10분</button>
			<button class="btn btn-outline-secondary" onclick="addMinutes(30)">+30분</button>
			<button class="btn btn-outline-secondary" onclick="addMinutes(60)">+60분</button>
		</div>

		<!-- 제어 버튼 -->
		<div id="control-buttons" class="btn-group" role="group">
			<button class="btn btn-primary" onclick="startTimer()">시작</button>
			<button class="btn btn-warning" onclick="pauseTimer()">일시정지</button>
			<button class="btn btn-danger" onclick="resetTimer()">리셋</button>
		</div>
	</div>

	<audio id="beep-sound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" preload="auto"></audio>

	<script>
		let timerInterval = null;
		let remainingSeconds = 0;
		let totalSeconds = 0;

		const display = document.getElementById("timer-display");
		const minutesInput = document.getElementById("minutesInput");
		const secondsInput = document.getElementById("secondsInput");
		const beepSound = document.getElementById("beep-sound");

		function updateDisplay(seconds) {
			const m = String(Math.floor(seconds / 60)).padStart(2, '0');
			const s = String(seconds % 60).padStart(2, '0');
			display.textContent = `${m}:${s}`;
		}

		function getInputSeconds() {
			const min = parseInt(minutesInput.value, 10) || 0;
			const sec = parseInt(secondsInput.value, 10) || 0;
			return min * 60 + sec;
		}

		function applyTime() {
			remainingSeconds = totalSeconds = getInputSeconds();
			updateDisplay(remainingSeconds);
		}

		function startTimer() {
			clearInterval(timerInterval);
			if (remainingSeconds <= 0) applyTime();
			if (remainingSeconds <= 0) return;

			timerInterval = setInterval(() => {
				remainingSeconds--;
				if (remainingSeconds <= 0) {
					clearInterval(timerInterval);
					timerInterval = null;
					remainingSeconds = 0;
					beepSound.play();
				}
				updateDisplay(remainingSeconds);
			}, 1000);
		}

		function pauseTimer() {
			if (timerInterval) {
				clearInterval(timerInterval);
				timerInterval = null;
			}
		}

		function resetTimer() {
			clearInterval(timerInterval);
			timerInterval = null;
			applyTime();
		}

		function addMinutes(min) {
			remainingSeconds += min * 60;
			totalSeconds = remainingSeconds;
			updateDisplay(remainingSeconds);
		}

		function startFixed(min) {
			clearInterval(timerInterval);
			remainingSeconds = totalSeconds = min * 60;
			updateDisplay(remainingSeconds);
			startTimer();
		}

		// 초기 상태
		updateDisplay(0);
	</script>
</body>
</html>
