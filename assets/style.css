body {
	height: 100vh;
	overflow: hidden;
}

/* 사이드바(간단 버전) */
#sidebar {
	border-right: 1px solid #dee2e6;
	overflow-y: auto;
	width: 240px;
}

#content {
	flex: 1;
	overflow-y: auto;
}

/* 네비/목차 */
.nav-link {
	align-items: center;
	display: flex;
	font-size: 0.9rem;
	line-height: 1.2;
}
.nav-item { margin-bottom: 5px; }
.collapse-icon {
	text-align: center;
	width: 16px;
}
.tool-link-text-container {
	display: inline-block;
	flex-grow: 1;
	max-width: calc(100% - 35px);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}
.tool-link-text { display: inline-block; }
.nav-pills .nav-link.active,
.nav-pills .show > .nav-link { background-color: #0d6efd; }
.nav-link.active-tool {
	background-color: #e9ecef;
	color: #000;
}

/* 카드 */
.card-header {
	padding-bottom: 0.2rem;
	padding-top: 0.2rem;
	position: relative;
}
.card-header h2 {
	font-size: 1.25rem;
	margin-bottom: 0;
}
.card-body { padding: 0; }
.card-text {
	color: #6c757d;
	font-size: 0.85rem;
}

/* 임베디드 iframe */
#embedded-tool-iframe { min-height: 85vh; }

/* 커스텀 툴팁 */
.custom-tooltip {
	background-color: #333;
	border-radius: 4px;
	color: #fff;
	display: none;
	font-size: 0.875rem;
	padding: 5px 10px;
	pointer-events: none;
	position: fixed;
	z-index: 1070;
}

/* (구) 모달 */
#modal-overlay {
	align-items: center;
	background-color: rgba(0, 0, 0, 0.5);
	display: none;
	height: 100%;
	justify-content: center;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 1000;
}
#modal-content {
	background-color: #fff;
	border-radius: 5px;
	display: flex;
	flex-direction: column;
	height: 80%;
	padding: 20px;
	position: relative;
	width: 80%;
}
#modal-close {
	cursor: pointer;
	font-size: 24px;
	font-weight: 700;
	position: absolute;
	right: 15px;
	top: 10px;
	z-index: 1001;
}
#modal-iframe {
	border: none;
	flex-grow: 1;
	height: 100%;
	width: 100%;
}

/* 모달 버튼 컨테이너 */
#modal-button-container {
	bottom: 80px;
	display: flex;
	flex-direction: column;
	gap: 10px;
	position: fixed;
	right: 20px;
	z-index: 1100;
}

/* 모달 툴 버튼 */
.modal-tool-button {
	background-color: #495057;
	border: none;
	border-radius: 50%;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2),
	            0 6px 20px rgba(0, 0, 0, 0.19);
	font-size: 1.5rem;
	font-weight: 700;
	height: 50px;
	transition: all 0.3s ease;
	width: 50px;
}
.modal-tool-button:hover {
	background-color: #343a40;
	box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3),
	            0 8px 24px rgba(0, 0, 0, 0.22);
	transform: translateY(-2px);
}

/* 오른쪽 상단 고정 버튼 컨테이너 (간단 버전) */
#fixed-buttons-container {
	position: fixed;
	right: 15px;
	top: 15px;
	z-index: 1200;
}

/* 토글 버튼(간단) */
#toggleSidebarBtn {
	margin-top: auto;
	position: static;
}

/* 전역 색/레이아웃 */
html, body {
	-webkit-text-fill-color: currentColor;
	background-color: #121212 !important;
	color: #fff !important;
	color-scheme: light;
	forced-color-adjust: none;
	height: 100%;
	width: 100%;
}
.no-select {
	-webkit-tap-highlight-color: transparent;
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-ms-user-select: none;
	user-select: none;
}
body {
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	-webkit-overflow-scrolling: touch;
	margin: 0;
	min-height: 100%;
	overflow-x: hidden;
	padding: 0;
	touch-action: manipulation;
}
:root { --vh: 1vh; }
* { box-sizing: border-box; }

/* 모바일 safe-area 패딩 */
@supports (padding-bottom: env(safe-area-inset-bottom)) {
	@media (hover: none) and (pointer: coarse) {
		body { padding-bottom: env(safe-area-inset-bottom); }
	}
}

/* 모달 오픈 상태 */
body.modal-open {
	overflow: hidden;
	touch-action: none;
}

/* 컨텐츠 영역 */
#content {
	margin-left: 0;
	min-height: 100vh;
	padding: 2rem;
}

/* 사이드바(상세) */
#sidebar {
	background-color: #f8f9fa;
	box-shadow: 2px 0 6px rgba(0, 0, 0, 0.2);
	height: 100vh;
	left: 0;
	padding: 1rem;
	position: fixed;
	top: 0;
	transform: translateX(-100%);
	transition: transform 0.3s ease-in-out;
	width: 280px;
	z-index: 1050;
}
#sidebar.show { transform: translateX(0); }
#sidebar .close-btn {
	background: transparent;
	border: none;
	color: #333;
	font-size: 1.5rem;
	position: absolute;
	right: 10px;
	top: 10px;
}
#sidebar-overlay {
	background-color: rgba(0, 0, 0, 0.3);
	display: none;
	inset: 0;
	position: fixed;
	z-index: 1040;
}
#sidebar-overlay.active { display: block; }

/* ModalTool 전용 모달 */
#modal-tool-overlay {
	align-items: center;
	background-color: rgba(50, 40, 40, 0.5);
	display: none;
	height: 100%;
	justify-content: center;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 1000;
}
#modal-tool-content {
	background-color: #121212; /* 덮어씀 */
	border-radius: 5px;
	display: flex;
	flex-direction: column;
	height: calc(var(--vh, 1vh) * 100);
	max-height: none;
	overflow: hidden;
	overflow-y: auto;
	padding-bottom: env(safe-area-inset-bottom, 0);
	padding-top: env(safe-area-inset-top);
	position: relative;
	width: 95vw;
}
#modal-tool-iframe {
	border: none;
	flex-grow: 1;
	height: 100%;
	width: 100%;
}

/* 오른쪽 UI 래퍼/컨테이너 */
#fixed-ui-wrapper {
	pointer-events: none;
	position: fixed;
	right: 5px;
	top: 15px;
	z-index: 1200;
}
#fixed-ui-wrapper,
#fixed-buttons-container {
	align-items: flex-end;
	display: flex;
	flex-direction: column;
	gap: 10px;
}

/* (상세) 고정 버튼 컨테이너 */
#fixed-buttons-container {
	margin-right: -10px;
	position: relative;           /* ← min 기준: relative (아래 주석 참고) */
	transition: transform 0.35s ease-in-out;
	will-change: transform;
}
#fixed-buttons-container.hidden-to-right { transform: translateX(200%); }

/* 버튼 공통 */
#toggleSidebarBtn,
.modal-tool-button {
	align-items: center;
	border: none;
	border-radius: 50%;
	box-shadow: 0 2px 5px rgba(0,0,0,0.2);
	cursor: pointer;
	display: flex;
	flex-shrink: 0;
	height: 48px;
	justify-content: center;
	pointer-events: auto;
	transform: scale(0.85);
	transition:
		transform 0.2s ease-in-out,
		background-color 0.2s ease,
		opacity 0.2s ease;
	width: 48px;
}
.modal-tool-button {
	color: #fff;
	font-size: 1.2rem;
}
#toggleSidebarBtn .bi-list { font-size: 1.8rem !important; }
#toggleSidebarBtn:hover,
.modal-tool-button:hover { transform: scale(1); }

/* 활성/비활성 상태 */
.modal-tool-button.active-modal {
	box-shadow: 0 0 0 3px #fff, 0 0 0 5px rgba(0,0,0,0.3);
	font-weight: 700;
	transform: scale(1);
}
#toggleSidebarBtn.inactive-when-modal {
	background-color: #6c757d;
	border-color: #6c757d;
	cursor: not-allowed;
	opacity: 0.7;
	transform: scale(0.85);
}
#toggleSidebarBtn.inactive-when-modal:hover { transform: scale(0.85); }

/* 확장 UI */
#expanded-ui-container {
	align-items: flex-end;
	display: flex;
	flex-direction: column;
	gap: 10px;
	margin-bottom: 10px;
	opacity: 0;
	pointer-events: none;
	transform: scale(0);
	transform-origin: bottom right;
	transition: transform 0.2s ease-out, opacity 0.2s ease-out;
}
#expanded-ui-container.show {
	opacity: 1;
	pointer-events: auto;
	transform: scale(1);
}
#expanded-ui-container .btn { transform: scale(0.85); }
#expanded-ui-container .btn,
#uiToggleBtn {
	height: 48px;
	pointer-events: auto;
	width: 48px;
}

/* + 버튼 */
#uiToggleBtn {
	align-items: center;
	border: none;
	border-radius: 50%;
	box-shadow: 0 2px 5px rgba(0,0,0,0.2);
	cursor: pointer;
	display: flex;
	font-size: 1.5rem;
	justify-content: center;
	transition: transform 0.2s ease-out !important;
}
#uiToggleBtn.active { transform: rotate(45deg); }

/* 사이드바 리스트 활성 */
.nav-link.active-tool {
	background-color: var(--bs-primary);
	color: #fff !important;
	font-weight: 700;
}
.nav-link.active-tool::after {
	color: #fff;
	content: " ✓";
	margin-left: 6px;
}

/* 로딩 오버레이 */
#loader-overlay {
	align-items: center;
	background-color: rgba(18, 18, 18, 0.8);
	display: none;
	height: 100%;
	justify-content: center;
	left: 0;
	position: fixed;
	top: 0;
	width: 100%;
	z-index: 2000;
}
.spinner {
	animation: spin 1s linear infinite;
	border: 5px solid #f3f3f3;
	border-radius: 50%;
	border-top-color: #3498db;
	height: 56px;
	width: 56px;
}
@keyframes spin {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(1turn); }
}

/* 모달 콘텐츠 높이 */
.modal-content {
	background-color: #121212;
	height: 100dvh;
	overflow-y: auto;
}

/* 100vh 보정 */
.fullscreen,
.modal-content,
[data-vh-fill="true"] {
	height: calc(var(--vh, 1vh) * 100);
}


:root {
  --vh: 1vh;
  --ad-h: 0px;  /* 모바일 하단 광고 높이 */
  --ad-w: 0px;  /* PC 우측 광고 폭 */
}

/* 페이지 전체를 그리드로 쪼갠다 */
#app-shell {
  display: grid;
  height: calc(var(--vh, 1vh) * 100);
  width: 100%;
  grid-template-rows: 1fr;      /* 기본: 한 칸만 */
  grid-template-columns: 1fr;
}

/* 뷰포트(메인 칸) */
#app-viewport {
  grid-row: 1;
  grid-column: 1;
  position: relative;           /* 내부의 overlay/버튼을 absolute로 얹을 베이스 */
  overflow: hidden;
}

/* 광고 기본은 숨김 */
#ad-slot { display: none; }

/* 광고 ON: 그리드 형태를 광고 위치에 맞춰 바꾼다 */
html[data-ad="on"][data-ad-pos="bottom"] #app-shell {
  grid-template-rows: 1fr var(--ad-h);   /* 아래에 광고 칸 추가 */
  grid-template-columns: 1fr;
}
html[data-ad="on"][data-ad-pos="bottom"] #ad-slot {
  display: block;
  grid-row: 2;
  grid-column: 1;
  background: #fff;
  box-shadow: 0 -2px 6px rgba(0,0,0,.15);
  padding-bottom: env(safe-area-inset-bottom);
}

html[data-ad="on"][data-ad-pos="right"] #app-shell {
  grid-template-rows: 1fr;
  grid-template-columns: 1fr var(--ad-w); /* 오른쪽에 광고 칸 추가 */
}
html[data-ad="on"][data-ad-pos="right"] #ad-slot {
  display: block;
  grid-row: 1;
  grid-column: 2;
  background: #fff;
  box-shadow: -2px 0 6px rgba(0,0,0,.15);
}

/* 모달/로더/버튼들은 이제 '화면'이 아니라 뷰포트 안을 채운다 */
#modal-tool-overlay,
#loader-overlay {
  position: absolute;
  inset: 0;                     /* app-viewport만 덮음 */
}

#fixed-ui-wrapper {
  position: absolute;
  top: 15px;
  right: 5px;                   /* 광고가 우측이어도 자동으로 칸 안 오른쪽에 붙음 */
  z-index: 1500;
  pointer-events: none;         /* 내부 버튼들만 이벤트 */
  transform: translateZ(0); /* Safari/GPU 합성 꼬임 방지 */
  will-change: transform;
}
#fixed-ui-wrapper * { pointer-events: auto; }

/* 모달은 뷰포트만 채우면 되니 height:100% */
#modal-tool-content { 
  height: 100%;
  width: 100%;
}

/* 레이어링: 사이드바 < 모달 < 광고 < 로더(최상단) */
#sidebar { z-index: 1050; }
#ad-slot { z-index: 1300; } 
#modal-tool-overlay { position: absolute; inset: 0; z-index: 1200; }
#loader-overlay     { position: absolute; inset: 0; z-index: 2000; }

#modal-tool-overlay { z-index: 1200; }
#fixed-ui-wrapper  { position: absolute; z-index: 1500; }

/* 모달 열릴 때 우측 버튼군 가리기(선택) */
body.modal-open #fixed-ui-wrapper { transition: opacity .15s; }

body.modal-open #fixed-ui-wrapper {
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important; /* 클릭 막히는 경우 대비 */
  filter: none !important;         /* 투명도/블러 등 제거 */
}

/* 실제 버튼/토글이 보일 때만 이벤트 활성화 */
#uiToggleBtn { pointer-events: auto; }
#expanded-ui-container { pointer-events: none; }
#expanded-ui-container.show { pointer-events: auto; }

/* 모달 버튼 묶음(사이드바 토글 포함) */
#fixed-buttons-container { pointer-events: auto; }

/* ⬇️ 핵심: 숨김 상태에선 완전히 클릭 통과 */
#fixed-buttons-container.hidden-to-right,
#fixed-buttons-container.hidden-to-right * {
  pointer-events: none !important;
}

/* (혹시 남아 있었다면) 모달 열릴 때 버튼군을 숨기는 규칙 무력화 */
body.modal-open #fixed-ui-wrapper {
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: none !important; /* 래퍼는 계속 통과 */
}